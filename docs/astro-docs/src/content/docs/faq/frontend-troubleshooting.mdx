---
title: AWS Frontend MCP Server Troubleshooting
description: Common issues and solutions when deploying the Frontend React application
---

import { Aside } from '@astrojs/starlight/components';

This page covers common issues encountered when deploying the Frontend React application that integrates with Amazon Bedrock AgentCore.

## Authentication Issues

### I get "Auth UserPool not configured" error
**Environment**: ðŸ’» **Any environment**

Update your `amplify_outputs.json` with the correct Amplify v6 format:

```json
{
  "auth": {
    "user_pool_id": "us-west-2_XXXXXXXXX",
    "aws_region": "us-west-2",
    "user_pool_client_id": "YOUR_CLIENT_ID",
    "username_attributes": ["username"],
    "verification_mechanisms": ["username"]
  },
  "version": "1"
}
```

### I get "USER_SRP_AUTH is not enabled for the client" error
**Environment**: ðŸ’» **Any environment**

Enable SRP authentication in your Cognito User Pool Client:

```bash
aws cognito-idp update-user-pool-client \
  --user-pool-id us-west-2_XXXXXXXXX \
  --client-id YOUR_CLIENT_ID \
  --explicit-auth-flows ALLOW_USER_SRP_AUTH ALLOW_REFRESH_TOKEN_AUTH ALLOW_USER_PASSWORD_AUTH
```

### The login page asks for email but I only have a username
**Environment**: ðŸ’» **Any environment**

Change the login mechanism in your Authenticator component:

```typescript title="Example Authenticator Component"
<Authenticator 
  loginMechanisms={['username']} // Change from ['email']
```

## Application Runtime Issues

### I get "crypto.randomUUID is not a function" error
**Environment**: ðŸ’» **Any environment** (older browsers or Node.js versions)

Add a fallback for browsers that don't support `crypto.randomUUID`:

```typescript
const sessionId = self.crypto?.randomUUID?.() || 
  Math.random().toString(36).substring(2, 15) + 
  Math.random().toString(36).substring(2, 15)
```

### I get "Failed to resolve import" for amplify_outputs.json
**Environment**: ðŸ’» **Any environment**

Check the import path in `main.tsx`:

```typescript
// Correct path
import outputs from "./amplify_outputs.json";

// Not this
import outputs from "../amplify_outputs.json";
```

## AgentCore Integration Issues

### I get 404 error when calling the AgentCore API
**Environment**: ðŸ’» **Any environment**

Ensure you're using the correct Agent ARN from Parameter Store:

```bash
# Get the real Agent ARN
aws ssm get-parameter --name "/hotel_booking_agent/runtime/agent_arn"
```

Update your service with the correct ARN format:
```typescript
agentArn: 'arn:aws:bedrock-agentcore:us-west-2:YOUR_ACCOUNT_ID:runtime/hotel_booking_agent-XXXXXXXXXX'
```

### I get 403 Forbidden when calling the AgentCore API
**Environment**: ðŸ’» **Any environment**

Use a fresh access token from the current Amplify session instead of hardcoded tokens:

```typescript
import { fetchAuthSession } from 'aws-amplify/auth'

async setupConnection(): Promise<boolean> {
  const session = await fetchAuthSession()
  const accessToken = session.tokens?.accessToken?.toString()
  
  if (accessToken && this.config) {
    this.config.bearerToken = accessToken
    return true
  }
  return false
}
```

## Development Environment

### What are the test credentials?
**Environment**: ðŸ’» **Any environment**

Use these credentials from the Cognito User Pool:
- **Username**: `testuser`
- **Password**: `MyPassword123!`

### How do I access the application?

**Self-Deployment (Local Machine)**:
- Access at `http://localhost:5173`
- No additional configuration needed

**Workshop Studio (AWS-furnished environment)**:
- Access at `http://EC2_PUBLIC_IP:5173`
- Requires running the security group helper script first (see below)

## Workshop Studio Environment Setup

### Setting Up Vite Dev Server Access

**Problem**: Can't access Vite dev server (port 5173) from your browser in Workshop Studio environment

**Why**: The EC2 instance's security group blocks inbound traffic on port 5173 by default

**Solution**: Run the helper script to update security group rules:

```bash
# Get your public IP from https://ifconfig.me
./tools/workshop-studio/scripts/open-vite-access.sh YOUR_PUBLIC_IP
```

This script will:
1. Detect your EC2 instance and security group automatically
2. Add a rule allowing port 5173 access from your IP address
3. Configure CloudFront access for proxied connections

<Aside type="caution" title="Check Your Vite Port">
Vite defaults to port 5173, but if that port is already in use, it will automatically use a different port (5174, 5175, etc.). 

**Check your terminal output** when starting the dev server to see which port Vite is actually using, then either:
- Access the application on that port: `http://EC2_PUBLIC_IP:PORT_NUMBER`
- Or run the script again with the correct port if needed

The script currently only opens port 5173. For other ports, you may need to manually add security group rules or modify the script.
</Aside>

<Aside type="note" title="Region Detection">
The script automatically detects your AWS region from:
1. `AWS_DEFAULT_REGION` environment variable
2. AWS CLI configuration
3. Falls back to us-west-2 if neither is set
</Aside>

<Aside type="tip">
Always check the browser developer console for detailed error messages when troubleshooting issues.
</Aside>
