---
title: Troubleshooting Guide
description: Solutions for common setup and workshop issues
---

import { Card, CardGrid, Aside, Tabs, TabItem, LinkCard } from "@astrojs/starlight/components";

Find solutions to common issues organized by workshop phase. Jump to the section matching where you encountered the problem.

## Setup Phase Issues

### Tool Installation

### uv Installation Problems

<Aside type="caution">
If you encounter issues installing uv, try using the official installer script or check the [uv installation guide](https://docs.astral.sh/uv/getting-started/installation/).
</Aside>

### Command Not Found Errors

**Problem**: `command not found` errors for installed tools

**Solution**:

- Verify the tool is in your PATH
- Restart your terminal session
- Check if you need to reload your shell configuration

### uvx Command Not Found Error

**Problem**: `spawn uvx ENOENT` error when MCP servers try to start

**Solution**:

Use the full path to uvx instead of just `uvx` in your MCP configuration:

1. **Find your uvx path**:

   ```bash
   which uvx
   ```

2. **Update your MCP configuration** (`.kiro/settings/mcp.json`) to use the full path:

   Instead of:

   ```json
   {
     "mcpServers": {
       "awslabs.aws-pricing-mcp-server": {
         "command": "uvx",
         "args": ["awslabs.aws-pricing-mcp-server@latest"]
       }
     }
   }
   ```

   Use the full path:

   ```json
   {
     "mcpServers": {
       "awslabs.aws-pricing-mcp-server": {
         "command": "/opt/homebrew/bin/uvx",
         "args": ["awslabs.aws-pricing-mcp-server@latest"]
       }
     }
   }
   ```

   Common paths:

   - macOS (Homebrew): `/opt/homebrew/bin/uvx`
   - Linux/macOS (manual install): `/usr/local/bin/uvx`
   - Linux (system): `/usr/bin/uvx`

### Permission Errors During Installation

**Problem**: Permission errors during installation

**Solution**:

- Use `sudo` for system-wide installations (if appropriate)
- Consider using user-local installations
- Check your user permissions for the installation directory

### Python Virtual Environment Permission Errors

**Problem**: Permission denied error with Python interpreter during CDK operations

<details>
<summary>Stack Trace Example</summary>
```text title="Permission Denied Stack Trace"
error: Failed to query Python interpreter
  Caused by: failed to canonicalize path `packages/cdk-infra-python/.venv/bin/python3`: Permission denied (os error 13)
packages/cdk-infra-python:
 ERR_PNPM_RECURSIVE_RUN_FIRST_FAIL  cdk-infra-python@0.1.0 cdk: `uv run cdk bootstrap aws://0000000000/us-west-2`
Exit status 2
 ELIFECYCLE  Command failed with exit code 2.
```
</details>

**Solution**:
- Recreate the uv python virtual environment:
  ```bash title="Recreate uv venv"
  cd packages/cdk-infra-python
  rm -rf .venv
  uv sync
  ```

## AWS Access Issues

### AWS Credentials Not Working

**Problem**: AWS credentials not working or "Could not load credentials from any providers" error

**Solution**:

- **For AWS Internal Users**: Ensure you run `mwinit` with your assigned account before starting the workshop
- **For External Users**: Verify your AWS CLI is configured with appropriate credentials
- Check AWS CLI configuration: `aws configure list`
- Ensure you're using the correct AWS profile
- Verify your session hasn't expired:
  ```bash
  aws sts get-caller-identity
  ```

### API Testing Credentials

**Problem**: API tests fail with credential-related errors

**How Credentials Work**:

The API tests require these environment variables to be set:
- `AWS_ACCESS_KEY_ID`
- `AWS_SECRET_ACCESS_KEY`  
- `AWS_SESSION_TOKEN` (for temporary credentials)

A helper script (`set-aws-creds.sh`) is provided to automatically export these from your AWS CLI configuration.

**Workshop Studio Participants**:
- Find credentials in your Workshop Studio dashboard (see Workshop Studio guide)
- Set them as environment variables before running tests
- The helper script will detect and use them automatically

**Self-Deployment - macOS/Linux/Git Bash**:
- Use the optional helper script to export credentials:
  ```bash
  cd packages/cdk-infra-python/tests/bruno
  . ./set-aws-creds.sh
  ```
- Or ensure AWS CLI is configured and variables will be auto-detected: `aws configure list`

**Self-Deployment - Windows cmd/PowerShell**:
- Manually set environment variables before running tests:
  ```powershell
  $env:AWS_ACCESS_KEY_ID="your_key_here"
  $env:AWS_SECRET_ACCESS_KEY="your_secret_here"
  $env:AWS_SESSION_TOKEN="your_token_here"
  ```

### CDK Deployment Permissions Denied

**Problem**: CDK deployment permissions denied

**Solution**:

- Verify your IAM role has necessary CDK permissions
- Check if you need to assume a specific role for deployment
- Contact your AWS administrator for permission verification

### Stack Does Not Exist Error

**Problem**: Getting "Stack with id VibeCodingWorkshopMockApis does not exist" when running CloudFormation commands

**Solution**:

This usually means you're using a different AWS profile than the one used for deployment.

- **Check your current profile**: `aws configure list`
- **List available profiles**: `aws configure list-profiles`
- **Use the correct profile** in your commands:

  ```bash
  # For CloudFormation commands
  aws cloudformation describe-stacks \
    --stack-name VibeCodingWorkshopMockApis \
    --profile YOUR_PROFILE_NAME \
    --query 'Stacks[0].Outputs[*].[OutputKey,OutputValue]' \
    --output table

  # For CDK commands
  pnpm cdk deploy VibeCodingWorkshopMockApis --profile YOUR_PROFILE_NAME

  # Or set the profile as default for the session
  export AWS_PROFILE=YOUR_PROFILE_NAME
  ```

- **Verify the stack exists** in the correct account/region:
  ```bash
  aws cloudformation list-stacks --profile YOUR_PROFILE_NAME
  ```

## Deployment Phase Issues

### CDK Deployment Failed

**Problem**: AgentCore CDK deployment failed

**Solution**:

- Check CloudFormation console for detailed error messages
- Verify you have permissions for Lambda, API Gateway, DynamoDB, and IAM
- Ensure you're deploying to a supported AWS region
- Check account limits for AWS services

### API Endpoints Not Accessible

**Problem**: Deployed APIs are not accessible

**Solution**:

- Verify CloudFormation stack completed successfully
- Check API Gateway endpoints in AWS console
- Ensure API keys were generated correctly
- Test with simple curl commands first

## Configuration Phase Issues

### MCP Server Configuration Issues

### MCP Servers Not Appearing in Kiro

**Problem**: MCP servers not appearing in Kiro

**Solution**:

- Verify MCP servers are installed correctly using `uvx list`
- Check Kiro MCP configuration settings
- Restart Kiro after configuration changes

### MCP Server Connection Errors

**Problem**: MCP server connection errors

**Solution**:

- Verify network connectivity
- Check if any corporate firewalls are blocking connections
- Ensure MCP server processes are running

## Workshop Activity Issues

### API Testing Issues

**Problem**: Bruno API tests are failing

**Common Causes**:

1. **Configuration Issues**
   - Verify API URLs are correctly configured in Bruno environment files
   - Check that API keys are properly set
   - Ensure you're using the correct AWS region

2. **Lambda Timeout Errors**
   - Some API tests may experience timeouts (HTTP 504 Gateway Timeout)
   - Check CloudWatch Logs to review Lambda execution times and identify slow operations
   - Use your AI assistant to analyze logs and diagnose which AWS service calls are taking the most time

3. **Deployment Issues**
   - Ensure the APIs are fully deployed and accessible
   - Verify CloudFormation stacks completed successfully
   - Test individual endpoints manually first with curl

## Workshop Cleanup Issues

### Stack Deletion Fails

**Problem**: CDK stack deletion fails during cleanup

**Solution**:

- Check stack events for detailed error messages:
  ```bash
  aws cloudformation describe-stack-events --stack-name STACK_NAME
  ```
- If resources are stuck, try force deletion (use with caution):
  ```bash
  aws cloudformation delete-stack --stack-name STACK_NAME --retain-resources
  ```
- Delete stacks in the correct order: MCP Server → Booking Agent → Mock APIs

### Resources Not Automatically Deleted

**Problem**: Some AWS resources remain after stack deletion

**Solution**:

Some resources may need manual cleanup:

- **S3 Buckets**: May need manual deletion if they contain objects
- **CloudWatch Logs**: Log groups are retained by default
- **IAM Roles**: Custom roles might need manual cleanup

Check for remaining resources:

```bash
# List S3 buckets created during workshop
aws s3 ls | grep -i "agentcore\|workshop"

# List CloudWatch log groups
aws logs describe-log-groups --query 'logGroups[?contains(logGroupName, `agentcore`) || contains(logGroupName, `workshop`)].logGroupName'
```

### CDK Bootstrap Stack Issues

**Problem**: Unsure whether to delete CDK bootstrap stack

**Solution**:

- **Keep the bootstrap stack** if you plan to use CDK for other projects
- **Only delete** if you're certain you won't use CDK in this AWS account/region again
- The bootstrap stack has minimal ongoing costs

## Getting Help

If you encounter issues not covered in this guide:

1. **Review the Documentation**: Check related sections in the workshop documentation for additional context
2. **Search GitHub Issues**: Look for similar issues in the [GitHub repository](https://github.com/aws-solutions-library-samples/guidance-for-vibe-coding-with-aws-mcp-servers/issues)
3. **Create a GitHub Issue**: If you find a bug or have a question, open an issue in the repository
4. **AWS Support**: For AWS-specific service issues, consult [AWS Support](https://aws.amazon.com/support/) or the relevant service documentation

<Aside type="tip">
**Workshop Participants**: If you're attending an in-person or virtual workshop event, trainers are available to provide real-time troubleshooting and answer questions directly.
</Aside>
